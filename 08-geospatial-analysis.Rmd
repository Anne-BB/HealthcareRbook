# Geospatial analysis

This section deals with the use of geospatial analysis in healthcare. There is a detailed tutorial online available [here](./https://richardbeare.github.io/GeospatialStroke/
)

There are several packages avalable for obtaining geocode. The _tmaptools_ package provide free geocoding using OSM overpass API. Both _ggmap_ and _googleway_ access Google Maps API and will require a key and payment for access.

## Geocoding

```{r eval=FALSE}
library(tmaptools)
mmc<-geocode_OSM ("monash medical centre, clayton")
mmc
```

The equivalent code in ggmap is provided below.

```{r eval=FALSE}
library(ggmap)
register_google(key="Your Key")
#geocode
geocode ("monash medical centre, clayton")
#trip
mapdist("5 stud rd dandenong","monash medical centre")
```

Googleway had the flexibility of easily interrogating Google Maps API for time of trip and traffic condition.

```{r eval=FALSE}
library(googleway)
library(googleway)
key="Your Key"
#trip to MMC
#traffic model can be optimistic, best guess, pessimistic
google_distance("5 stud rd dandenong","monash medical centre", key=key, departure_time=as.POSIXct("2019-12-03 08:15:00 AEST"),traffic_model = "optimistic")
```
There are several methods for reading the shapefile data. Previously _rgdal_ library was used. This approach creates files which can be described as S4 object in that there are slots for different data. The simple feature _sf_ approach is much easier to handle and the data can easily be subsetted and merged if needed.

## Thematic map
In the first chapter we provided a thematic map example with _ggplot2_. here we will illustrate with _mapview_.
```{r map}
library(mapview)
library(sf)
Aust<-st_read("./Data-Use/GCCSA_2016_AUST.shp") 
mapview(Aust, zcol="AREASQKM16")
```

## Spatial regression

## Spatio-temporal regression
